<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D1ER82HJ6L"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-D1ER82HJ6L');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Past Questions - SAZUG Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/viewerjs@1.11.1/dist/viewer.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/viewerjs@1.11.1/dist/viewer.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    
    body {
      font-family: 'Inter', sans-serif;
    }

    .nav-gradient {
      background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%);
    }
    
    .card-hover {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .btn-primary {
      background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%);
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      background: linear-gradient(90deg, #4338ca 0%, #6d28d9 100%);
      box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.3);
    }
    
    .btn-secondary {
      background: linear-gradient(90deg, #059669 0%, #10b981 100%);
      transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
      background: linear-gradient(90deg, #047857 0%, #0da271 100%);
      box-shadow: 0 10px 15px -3px rgba(5, 150, 105, 0.3);
    }
    
    .btn-tertiary {
      background: linear-gradient(90deg, #7c3aed 0%, #8b5cf6 100%);
      transition: all 0.3s ease;
    }
    
    .btn-tertiary:hover {
      background: linear-gradient(90deg, #6d28d9 0%, #7c3aed 100%);
      box-shadow: 0 10px 15px -3px rgba(124, 58, 237, 0.3);
    }
    
    .floating {
      animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
    
    #loading {
      display: flex;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.95);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    
    .loading-spinner {
      border: 4px solid rgba(79, 70, 229, 0.3);
      border-radius: 50%;
      border-top: 4px solid #4f46e5;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .course-card {
      border-left: 4px solid #4f46e5;
    }
    
    .year-group {
      border-top: 1px solid #e5e7eb;
      padding-top: 1rem;
    }
    
    .image-thumbnail {
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .image-thumbnail:hover {
      transform: scale(1.03);
    }
    
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      max-width: 90%;
      max-height: 90%;
    }
    
    .close {
      position: absolute;
      top: 20px;
      right: 35px;
      color: white;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
    }
    
    .close:hover {
      color: #ccc;
    }
    
    /* Search bar styles */
    .search-container {
      max-width: 600px;
      margin: 0 auto 2rem;
    }
    
    .search-wrapper {
      position: relative;
    }
    
    .search-input {
      width: 100%;
      padding: 1rem 3rem 1rem 1.5rem;
      border-radius: 50px;
      border: 2px solid #e5e7eb;
      font-size: 1rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    
    .search-input:focus {
      outline: none;
      border-color: #4f46e5;
      box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.2);
    }
    
    .search-button {
      position: absolute;
      right: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%);
      border: none;
      border-radius: 50%;
      width: 2.5rem;
      height: 2.5rem;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .search-button:hover {
      background: linear-gradient(90deg, #4338ca 0%, #6d28d9 100%);
      transform: translateY(-50%) scale(1.05);
    }
    
    .search-results-count {
      text-align: center;
      margin-top: 0.5rem;
      color: #6b7280;
      font-size: 0.9rem;
    }
    
    /* Training message styles */
    .training-message {
      max-width: 800px;
      margin: 0 auto 2rem;
      border-radius: 1rem;
      padding: 2rem;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
      text-align: center;
    }
    
    .siwes-message {
      background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
      border-left: 6px solid #4f46e5;
    }
    
    .teaching-practice-message {
      background: linear-gradient(135deg, #d1fae5 0%, #dcfce7 100%);
      border-left: 6px solid #10b981;
    }
    
    .clinical-posting-message {
      background: linear-gradient(135deg, #fef3c7 0%, #fef9c3 100%);
      border-left: 6px solid #f59e0b;
    }
    
    .industrial-training-message {
      background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
      border-left: 6px solid #6366f1;
    }
    
    .message-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }
    
    .message-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    
    .message-description {
      color: #4b5563;
      margin-bottom: 1.5rem;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 min-h-screen flex flex-col">

  <!-- Loading Screen -->
  <div id="loading">
    <div class="loading-spinner mb-4"></div>
    <p class="text-gray-700 font-medium">Loading past questions...</p>
  </div>

  <!-- Header / Navigation -->
  <header class="nav-gradient text-white shadow-lg p-4 flex justify-between items-center sticky top-0 z-50">
    <div class="flex items-center gap-3">
      <img src="logo.jpg" alt="Portal Logo" class="h-12 w-12 object-contain rounded-full shadow-md">
      <div>
        <h1 class="text-xl md:text-2xl font-bold text-white">SAZUG Past Questions</h1>
        <p class="text-xs text-blue-100">Powered by AGI Innovations</p>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-grow px-4 py-8">
    <!-- Page Header -->
    <div class="max-w-6xl mx-auto mb-8">
      <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 text-center">
        <h1 id="pageTitle" class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2">Past Questions</h1>
        <p id="pageSubtitle" class="text-gray-600">Select a course to view available past questions</p>
        <div class="mt-4 flex flex-wrap justify-center gap-2">
          <span id="currentDept" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"></span>
          <span id="currentLevel" class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium"></span>
          <span id="currentSemester" class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"></span>
        </div>
      </div>
    </div>

    <!-- Training Message Container -->
    <div id="trainingMessageContainer"></div>

    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-wrapper">
        <input type="text" id="searchInput" class="search-input" placeholder="Search for a course (e.g., CSC101, Mathematics)">
        <button id="searchButton" class="search-button">
          <i class="fas fa-search"></i>
        </button>
      </div>
      <div id="searchResultsCount" class="search-results-count"></div>
    </div>

    <!-- Courses Grid -->
    <div id="coursesContainer" class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Courses will be dynamically inserted here -->
    </div>

    <!-- No Results Message -->
    <div id="noResults" class="max-w-6xl mx-auto hidden">
      <div class="bg-white rounded-2xl shadow-lg p-8 text-center">
        <div class="text-5xl text-gray-300 mb-4">
          <i class="fas fa-file-alt"></i>
        </div>
        <h2 class="text-xl font-bold text-gray-700 mb-2">No Past Questions Available</h2>
        <p class="text-gray-600 mb-6">There are no past questions available for the selected department, level, and semester combination.</p>
        <button onclick="window.location.href='home.html'" class="btn-primary text-white px-6 py-3 rounded-lg font-medium">
          <i class="fas fa-arrow-left mr-2"></i> Back to Home
        </button>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-6 mt-12">
    <div class="max-w-6xl mx-auto px-4 text-center">
      <p class="text-sm">&copy; 2025 SaZUG Past Questions Portal. All Rights Reserved.</p>
      <p class="text-sm mt-2">Powered by AGI â€“ Aliyu Garba Innovations.</p>
    </div>
  </footer>

  <!-- Image Modal -->
  <div id="imageModal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <img class="modal-content" id="modalImage">
  </div>

  <script>
    // Global variables
    let dept, level, semester;
    let questionsData = {};
    let allCourses = []; // Store all courses for search functionality

    // DOM elements
    const loadingElement = document.getElementById('loading');
    const coursesContainer = document.getElementById('coursesContainer');
    const noResultsElement = document.getElementById('noResults');
    const pageTitle = document.getElementById('pageTitle');
    const pageSubtitle = document.getElementById('pageSubtitle');
    const currentDept = document.getElementById('currentDept');
    const currentLevel = document.getElementById('currentLevel');
    const currentSemester = document.getElementById('currentSemester');
    const imageModal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    const searchResultsCount = document.getElementById('searchResultsCount');
    const trainingMessageContainer = document.getElementById('trainingMessageContainer');

    // Department classifications for training programs
    const trainingConfig = {
      // SIWES departments (300-level second semester)
      siwes: {
        departments: [
          'csc', 'math', 'stat', 'phy', 'physics', 'physics-edu', 'chem', 'bio', 'biochemistry', 'mic', 'microbiology',
          'agric-economics-extension', 'animal-science', 'crop-science', 'soil-science', 'environmental-science',
          'botany', 'zoology'
        ],
        level: '300-level',
        semester: 'second',
        message: {
          title: 'Industrial Training (SIWES)',
          description: 'This semester is dedicated to the Student Industrial Work Experience Scheme (SIWES).',
          type: 'siwes',
          icon: 'fas fa-industry'
        }
      },
      
      // Teaching Practice departments (300-level second semester)
      teachingPractice: {
        departments: [
          'bio-edu', 'chem-edu', 'csc-edu', 'english-edu', 'math-edu', 'phy-edu', 'physics-edu'
        ],
        level: '300-level',
        semester: 'second',
        message: {
          title: 'Teaching Practice',
          description: 'This semester is dedicated to Teaching Practice for Education students.',
          type: 'teaching-practice',
          icon: 'fas fa-chalkboard-teacher'
        }
      },
      
      // Clinical Posting departments (300-level second semester) - UPDATED
      clinicalPosting300: {
        departments: [
          'nurs', 'anatomy', 'physiology', 'pharmacology'
        ],
        level: '300-level',
        semester: 'second',
        message: {
          title: 'Clinical Posting',
          description: 'This semester is dedicated to Clinical Posting for Medical and Health Science students.',
          type: 'clinical-posting',
          icon: 'fas fa-hospital-user'
        }
      },
      
      // Clinical Posting departments (400-level second semester)
      clinicalPosting400: {
        departments: [
          'phh'
        ],
        level: '400-level',
        semester: 'second',
        message: {
          title: 'Clinical Posting',
          description: 'This semester is dedicated to Clinical Posting for Health Science students.',
          type: 'clinical-posting',
          icon: 'fas fa-hospital-user'
        }
      },
      
      // Pharmacy Clinical Training (500-level second semester)
      pharmacyTraining: {
        departments: ['pharm'],
        level: '500-level',
        semester: 'second',
        message: {
          title: 'Clinical Training / Externship',
          description: 'This semester is dedicated to Clinical Training or Professional Externship for Pharmacy students.',
          type: 'clinical-posting',
          icon: 'fas fa-pills'
        }
      },
      
      // Industrial Training (Environmental Science - 400-level second semester)
      industrialTraining: {
        departments: ['environmental-science'],
        level: '400-level',
        semester: 'second',
        message: {
          title: 'Industrial Training',
          description: 'This semester is dedicated to Industrial Training for Environmental Science students.',
          type: 'industrial-training',
          icon: 'fas fa-hard-hat'
        }
      }
    };

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      // Get URL parameters
      const urlParams = new URLSearchParams(window.location.search);
      dept = urlParams.get('dept');
      level = urlParams.get('level');
      semester = urlParams.get('semester');

      // Validate parameters
      if (!dept || !level || !semester) {
        showError('Invalid parameters. Please go back and select department, level, and semester.');
        return;
      }

      // Update page info
      updatePageInfo();
      
      // Load questions data
      loadQuestionsData();

      // Add search functionality
      searchButton.addEventListener('click', performSearch);
      searchInput.addEventListener('input', performSearch);
      searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          performSearch();
        }
      });
    });

    // Update page information based on URL parameters
    function updatePageInfo() {
      // Format display names
      const deptDisplay = formatDepartment(dept);
      const levelDisplay = level.charAt(0).toUpperCase() + level.slice(1);
      const semesterDisplay = semester === 'first' ? 'First Semester' : 'Second Semester';

      // Update page elements
      pageTitle.textContent = `${deptDisplay} Past Questions`;
      pageSubtitle.textContent = `${levelDisplay} - ${semesterDisplay}`;
      currentDept.textContent = deptDisplay;
      currentLevel.textContent = levelDisplay;
      currentSemester.textContent = semesterDisplay;
    }

    // Load questions data from JSON file
    function loadQuestionsData() {
      fetch('data/questions.json')
        .then(response => {
          if (!response.ok) {
            throw new Error('Failed to load questions data');
          }
          return response.json();
        })
        .then(data => {
          questionsData = data;
          displayCourses();
        })
        .catch(error => {
          console.error('Error loading questions data:', error);
          showError('Failed to load past questions. Please try again later.');
        });
    }

    // Display courses based on selected parameters
    function displayCourses() {
      // Hide loading screen
      loadingElement.style.display = 'none';

      // Check if this is a training semester
      const trainingInfo = checkTrainingSemester();
      
      if (trainingInfo) {
        // Show training message and hide course list
        showTrainingMessage(trainingInfo);
        return;
      }

      // Check if data exists for the selected parameters
      if (!questionsData[dept] || !questionsData[dept][level] || !questionsData[dept][level][semester]) {
        noResultsElement.classList.remove('hidden');
        return;
      }

      const courses = questionsData[dept][level][semester];
      const courseCodes = Object.keys(courses);

      // If no courses available
      if (courseCodes.length === 0) {
        noResultsElement.classList.remove('hidden');
        return;
      }

      // Store all courses for search functionality
      allCourses = courseCodes.map(courseCode => {
        return {
          code: courseCode,
          files: courses[courseCode],
          element: createCourseCard(courseCode, courses[courseCode])
        };
      });

      // Display all courses initially
      displayFilteredCourses(allCourses);
    }

    // Check if current semester is for training
    function checkTrainingSemester() {
      // Law department doesn't have training semesters
      if (dept === 'law') return null;
      
      // Check each training type
      for (const [trainingType, config] of Object.entries(trainingConfig)) {
        if (config.departments.includes(dept) && 
            level === config.level && 
            semester === config.semester) {
          return config.message;
        }
      }
      
      return null;
    }

    // Show training message
    function showTrainingMessage(trainingInfo) {
      const messageHtml = `
        <div class="training-message ${trainingInfo.type}-message">
          <div class="message-icon text-${getMessageColor(trainingInfo.type)}-600">
            <i class="${trainingInfo.icon}"></i>
          </div>
          <h2 class="message-title text-${getMessageColor(trainingInfo.type)}-800">
            ${trainingInfo.title}
          </h2>
          <p class="message-description">
            ${trainingInfo.description}
          </p>
          <p class="text-sm text-${getMessageColor(trainingInfo.type)}-700 mb-4">
            Check your faculty calendar for placement details and registration information.
          </p>
          <button onclick="window.location.href='home.html'" class="btn-primary text-white px-6 py-3 rounded-lg font-medium">
            <i class="fas fa-arrow-left mr-2"></i> Back to Home
          </button>
        </div>
      `;
      
      trainingMessageContainer.innerHTML = messageHtml;
      
      // Hide search and courses
      document.querySelector('.search-container').style.display = 'none';
      coursesContainer.style.display = 'none';
    }

    // Get color for message type
    function getMessageColor(type) {
      const colorMap = {
        'siwes': 'blue',
        'teaching-practice': 'green',
        'clinical-posting': 'yellow',
        'industrial-training': 'indigo'
      };
      
      return colorMap[type] || 'blue';
    }

    // Display filtered courses based on search
    function displayFilteredCourses(courses) {
      // Clear current courses
      coursesContainer.innerHTML = '';
      
      // Display filtered courses
      courses.forEach(course => {
        coursesContainer.appendChild(course.element);
      });
      
      // Update search results count
      updateSearchResultsCount(courses.length);
    }

    // Update search results count display
    function updateSearchResultsCount(count) {
      const totalCourses = allCourses.length;
      
      if (count === totalCourses) {
        searchResultsCount.textContent = `Showing all ${totalCourses} courses`;
      } else if (count === 0) {
        searchResultsCount.textContent = 'No courses match your search';
      } else {
        searchResultsCount.textContent = `Showing ${count} of ${totalCourses} courses`;
      }
    }

    // Perform search based on input
    function performSearch() {
      const searchTerm = searchInput.value.trim().toLowerCase();
      
      if (searchTerm === '') {
        // If search is empty, show all courses
        displayFilteredCourses(allCourses);
        return;
      }
      
      // Filter courses based on search term
      const filteredCourses = allCourses.filter(course => {
        return course.code.toLowerCase().includes(searchTerm);
      });
      
      // Display filtered courses
      displayFilteredCourses(filteredCourses);
    }

    // Create a course card with files grouped by year
    function createCourseCard(courseCode, files) {
      // Group files by year
      const filesByYear = groupFilesByYear(files);
      const years = Object.keys(filesByYear).sort((a, b) => b - a); // Sort years in descending order

      // Create course card element
      const courseCard = document.createElement('div');
      courseCard.className = 'bg-white rounded-2xl shadow-lg p-6 card-hover course-card';
      courseCard.setAttribute('data-course-code', courseCode);
      
      // Course header
      const courseHeader = document.createElement('div');
      courseHeader.className = 'mb-4';
      
      const courseTitle = document.createElement('h3');
      courseTitle.className = 'text-xl font-bold text-gray-800';
      courseTitle.textContent = courseCode.toUpperCase();
      
      const fileCount = document.createElement('p');
      fileCount.className = 'text-gray-600 text-sm mt-1';
      fileCount.textContent = `${files.length} file${files.length !== 1 ? 's' : ''} available`;
      
      courseHeader.appendChild(courseTitle);
      courseHeader.appendChild(fileCount);
      courseCard.appendChild(courseHeader);

      // Files by year
      years.forEach(year => {
        const yearGroup = document.createElement('div');
        yearGroup.className = 'year-group mb-4';
        
        const yearHeader = document.createElement('h4');
        yearHeader.className = 'text-lg font-semibold text-gray-700 mb-2';
        yearHeader.textContent = year;
        
        yearGroup.appendChild(yearHeader);
        
        // Files for this year
        const filesGrid = document.createElement('div');
        filesGrid.className = 'grid grid-cols-2 gap-3';
        
        filesByYear[year].forEach(file => {
          const fileElement = createFileElement(file);
          filesGrid.appendChild(fileElement);
        });
        
        yearGroup.appendChild(filesGrid);
        courseCard.appendChild(yearGroup);
      });

      return courseCard;
    }

    // Group files by year extracted from filename
    function groupFilesByYear(files) {
      const grouped = {};
      
      files.forEach(file => {
        // Extract year from filename (assuming format like "csc101_2022.jpg")
        const yearMatch = file.match(/_(\d{4})/);
        const year = yearMatch ? yearMatch[1] : 'Unknown';
        
        if (!grouped[year]) {
          grouped[year] = [];
        }
        
        grouped[year].push(file);
      });
      
      return grouped;
    }

    // Create a file element based on file type
    function createFileElement(filename) {
      const fileExtension = filename.split('.').pop().toLowerCase();
      const filePath = `data/images/${filename}`;
      
      // Create file container
      const fileElement = document.createElement('div');
      fileElement.className = 'bg-gray-50 rounded-lg p-3 flex flex-col items-center justify-center text-center';
      
      if (['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(fileExtension)) {
        // Image file
        const img = document.createElement('img');
        img.src = filePath;
        img.alt = filename;
        img.className = 'w-full h-24 object-contain rounded image-thumbnail';
        img.onclick = () => openImageModal(filePath);
        
        const fileName = document.createElement('p');
        fileName.className = 'text-xs text-gray-600 mt-2 truncate w-full';
        fileName.textContent = filename;
        
        fileElement.appendChild(img);
        fileElement.appendChild(fileName);
      } else if (fileExtension === 'pdf') {
        // PDF file
        const pdfIcon = document.createElement('div');
        pdfIcon.className = 'text-red-500 text-3xl mb-2';
        pdfIcon.innerHTML = '<i class="fas fa-file-pdf"></i>';
        
        const pdfLink = document.createElement('a');
        pdfLink.href = filePath;
        pdfLink.target = '_blank';
        pdfLink.className = 'text-blue-600 hover:text-blue-800 font-medium text-sm';
        pdfLink.textContent = 'Open PDF';
        
        const fileName = document.createElement('p');
        fileName.className = 'text-xs text-gray-600 mt-1 truncate w-full';
        fileName.textContent = filename;
        
        fileElement.appendChild(pdfIcon);
        fileElement.appendChild(pdfLink);
        fileElement.appendChild(fileName);
      } else {
        // Other file types
        const fileIcon = document.createElement('div');
        fileIcon.className = 'text-gray-500 text-3xl mb-2';
        fileIcon.innerHTML = '<i class="fas fa-file"></i>';
        
        const fileLink = document.createElement('a');
        fileLink.href = filePath;
        fileLink.target = '_blank';
        fileLink.className = 'text-blue-600 hover:text-blue-800 font-medium text-sm';
        fileLink.textContent = 'Download';
        
        const fileName = document.createElement('p');
        fileName.className = 'text-xs text-gray-600 mt-1 truncate w-full';
        fileName.textContent = filename;
        
        fileElement.appendChild(fileIcon);
        fileElement.appendChild(fileLink);
        fileElement.appendChild(fileName);
      }
      
      return fileElement;
    }

    // Open image in modal
    function openImageModal(src) {
      modalImage.src = src;
      imageModal.style.display = 'flex';
    }

    // Close image modal
    function closeModal() {
      imageModal.style.display = 'none';
    }

    // Close modal when clicking outside the image
    imageModal.addEventListener('click', function(event) {
      if (event.target === imageModal) {
        closeModal();
      }
    });

    // Format department name for display
    function formatDepartment(deptCode) {
      const deptMap = {
        'accounting': 'Accounting',
        'agric-economics-extension': 'Agricultural Economics and Extension',
        'anatomy': 'Anatomy',
        'animal-science': 'Animal Science',
        'arabic': 'Arabic',
        'biochemistry': 'Biochemistry',
        'bio': 'Biology',
        'bio-edu': 'Biology Education',
        'botany': 'Botany',
        'bus-admin': 'Business Administration',
        'chem': 'Chemistry',
        'chem-edu': 'Chemistry Education',
        'crop-science': 'Crop Science',
        'csc': 'Computer Science',
        'csc-edu': 'Computer Education',
        'economics': 'Economics',
        'eng': 'English',
        'english-edu': 'English Education',
        'environmental-science': 'Environmental Science',
        'hausa': 'Hausa',
        'isl': 'Islamic Studies',
        'law': 'Law',
        'linguistics': 'Linguistics',
        'lis': 'Library & Information Science',
        'literature': 'Literature',
        'math': 'Mathematics',
        'math-edu': 'Mathematics Education',
        'mic': 'Microbiology',
        'nurs': 'Nursing',
        'pharm': 'Pharmacy',
        'pharmacology': 'Pharmacology',
        'phy': 'Physics',
        'phy-edu': 'Physics Education',
        'physics-edu': 'Physics Education',
        'physiology': 'Physiology',
        'pols': 'Political Science',
        'pub-admin': 'Public Administration',
        'phh': 'Public Health',
        'soc': 'Sociology',
        'soil-science': 'Soil Science',
        'stat': 'Statistics',
        'zoology': 'Zoology'
      };
      
      return deptMap[deptCode] || deptCode.toUpperCase();
    }

    // Show error message
    function showError(message) {
      loadingElement.style.display = 'none';
      coursesContainer.innerHTML = `
        <div class="col-span-full">
          <div class="bg-white rounded-2xl shadow-lg p-8 text-center">
            <div class="text-red-500 text-5xl mb-4">
              <i class="fas fa-exclamation-circle"></i>
            </div>
            <h2 class="text-xl font-bold text-gray-700 mb-2">Error Loading Content</h2>
            <p class="text-gray-600 mb-6">${message}</p>
            <button onclick="window.location.href='home.html'" class="btn-primary text-white px-6 py-3 rounded-lg font-medium">
              <i class="fas fa-arrow-left mr-2"></i> Back to Home
            </button>
          </div>
        </div>
      `;
    }
  </script>
</body>
</html>